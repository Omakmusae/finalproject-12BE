# ì˜¤ë””ì•½ (WHERE IS THE PHARMACY?)
> <br/>
> ì˜¤ë””ì•½ì€ ì„œìš¸ì— ê±°ì£¼í•˜ëŠ” ëª¨ë“  ë¶„ë“¤ì´ ì•½êµ­ì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. 
>
> ì˜¤ë””ì•½ì„ ì´ìš©í•˜ë©´ í˜„ì¬ ì˜ì—… ì¤‘ì¸ ì•½êµ­, ì•¼ê°„ ì˜ì—… ì¤‘ì¸ ì•½êµ­, ê³µíœ´ì¼ì— ì˜ì—…í•˜ëŠ” ì•½êµ­, ë‚´ ìœ„ì¹˜ ê¸°ë°˜ ì•½êµ­ì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>
> ë˜í•œ, ì™¸êµ­ì–´ë¡œ ì˜ì‚¬ì†Œí†µí•  ìˆ˜ ìˆëŠ” ì•½êµ­ì„ ì œê³µí•©ë‹ˆë‹¤.
>
> ì˜¤ë””ì•½ì€ ì™¸êµ­ì¸ ëŒ€ìƒ ì„¤ë¬¸ì¡°ì‚¬ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°œë°œë˜ì—ˆì§€ë§Œ, í•œêµ­ì¸ë¶„ë“¤ë„ ë¹ ë¥´ê³  ì‰½ê²Œ ì•½êµ­ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. 
>
> ì˜¤ë””ì•½ì€ ì„œìš¸ì—ì„œ ì•½êµ­ì„ ì°¾ìœ¼ì‹œëŠ” ëª¨ë“  ë¶„ë“¤ì´ í˜„ì¬ ì˜ì—…ì¤‘ì¸ ì•½êµ­ì„ ì‹ ì†í•˜ê²Œ ì¡°íšŒ ê°€ëŠ¥í•œ ë³´ê±´ ì˜ë£Œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤. <br/>
> <br/>

&nbsp;&nbsp;&nbsp;&nbsp;
  <img src="https://github.com/finalProject-12/finalproject-12FE/assets/109677566/a36f6473-a4c0-46dc-83f6-43eff2c88c6c" alt="image" width="600">

<details>
<summary>BROCHURE</summary>
<div>
&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://github.com/finalProject-12/finalproject-12FE/assets/109677566/3568a79d-7309-4487-a46e-ac3b15238c24" alt="image" width="600"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://github.com/finalProject-12/finalproject-12FE/assets/109677566/73b7439f-1360-44d8-aafc-71f2dc7095f1" alt="image" width="600"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://github.com/finalProject-12/finalproject-12FE/assets/109677566/1ccf6ab2-e06f-4949-abb2-d45cfe1410ac" alt="image" width="600"><br/>
</div>
</details>
<br/>

<details>
<summary>ê´€ë ¨ê¸°ì‚¬</summary>
<div>

> <br/>
> 
> &nbsp;&nbsp;&nbsp;&nbsp;[1999ë…„ ì™¸êµ­ì¸ 75% "ì•½êµ­ì´ìš© ë¶ˆí¸í•˜ë‹¤"](http://m.yakup.com/news/index.html?nid=2232&mode=view)
> 
> &nbsp;&nbsp;&nbsp;&nbsp;[2003ë…„ ì•½êµ­ë°©ë¬¸ ì™¸êµ­ì¸ê³¼ ì›í• í•œ ì˜ì‚¬ì†Œí†µ](https://www.pharmnews.com/news/articleView.html?idxno=16399)
> 
> &nbsp;&nbsp;&nbsp;&nbsp;[2013ë…„ ì™¸êµ­ì¸í™˜ì ë§Œì¡±ë„ ë†’ì´ë ¤ë©´ ì–¸ì–´ë¬¸ì œ ë“± ì§€ì†ì  í•´ê²° í•„ìš”](https://www.khidi.or.kr/board/view?linkId=48729204&menuId=MENU02200)
> 
> &nbsp;&nbsp;&nbsp;&nbsp;[2021ë…„ ë…¼ë¬¸ : ì˜ë£Œì„œë¹„ìŠ¤ ì´ìš© ì‹œ ì–´ë ¤ìš´ ì ì€ ì˜ì‚¬ì†Œí†µì˜ ì–´ë ¤ì›€ 22.6%](https://academic.naver.com/article.naver?doc_id=949807494)<br/>
><br/>

</div>
</details>

<br/>



## ë„ë©”ì¸(IP) ì£¼ì†Œ
&nbsp;&nbsp;&nbsp;&nbsp;
[**ğŸ’Šì˜¤ë””ì•½ ë°”ë¡œê°€ê¸°ğŸ’Š** https://www.odimedi.site/](https://www.odimedi.site/)
<br/>
<br/>
## FE / BE GitHub

&nbsp;&nbsp;&nbsp;&nbsp;
[ğŸ’ŠÂ Front-End **GitHub**](https://github.com/finalProject-12/finalproject-12FE)

&nbsp;&nbsp;&nbsp;&nbsp;
[ğŸ’ŠÂ Back-End **GitHub**](https://github.com/finalProject-12/finalproject-12BE)
<br/>
<br/>

## ğŸ—Â ì•„í‚¤í…ì³

  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ![ezgif-5-88b126727b](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/147c8784-243c-4541-8375-0b98d5ff71f5)

<br/>
<br/>

## ğŸ”ì£¼ìš”ê¸°ëŠ¥

- ì•½êµ­ ë¦¬ìŠ¤íŠ¸ ì¡°ê±´ë³„ ê²€ìƒ‰
    - ì•½êµ­ëª…, ì§€ì—­êµ¬, ì˜ì—…ì¤‘, ê³µíœ´ì¼ ì˜ì—…, ì•¼ê°„ ì˜ì—…ì„ í•„í„°ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤
    - ë‚´ ìœ„ì¹˜ì— ê¸°ë°˜ìœ¼ë¡œ 1kmë°˜ê²½ë‚´ì— ê°€ê¹Œìš´ìˆœìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.
    - ë‚´ ìœ„ì¹˜ ê¸°ë°˜ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í–ˆì„ë•Œ ì˜ì—…ì¤‘, ê³µíœ´ì¼ ì˜ì—…, ì•¼ê°„ ì˜ì—…ë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.
    
      ![ezgif com-video-to-gif](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/14545338-22b4-4b37-80ff-7388a75b7074)
    
    <br/>

- ì™¸êµ­ì–´ ê°€ëŠ¥í•œ ì•½êµ­ ì–¸ì–´í•„í„° ê²€ìƒ‰
    - ì•½êµ­ëª…, ì§€ì—­êµ¬, ì˜ì—…ì¤‘, ê³µíœ´ì¼ ì˜ì—…, ì•¼ê°„ ì˜ì—…ì„ í•„í„°ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤
    - ë‚´ ìœ„ì¹˜ì— ê¸°ë°˜ìœ¼ë¡œ 1kmë°˜ê²½ë‚´ì— ê°€ê¹Œìš´ìˆœìœ¼ë¡œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.
    - ë‚´ ìœ„ì¹˜ ê¸°ë°˜ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰í–ˆì„ë•Œ ì˜ì—…ì¤‘, ê³µíœ´ì¼ ì˜ì—…, ì•¼ê°„ ì˜ì—…ë„ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.
    - ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´ê°€ëŠ¥í•œ ì•½êµ­ë„ í•„í„° ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.
    
      ![ezgif com-video-to-gif (1)](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/014430b9-e6f1-4aec-a898-dbcb2d2d3d4c)
    
    <br/>

- ê³µì§€ì‚¬í•­
    
    - ì‚¬ì´íŠ¸ ë‚´ì— ìˆ˜ì •ì‚¬í•­ ë° ê³µì§€ì‚¬í•­ì„ ê´€ë¦¬ìê°€ ê³µìœ í•  ìˆ˜ ìˆë‹¤.
    
      ![ezgif com-video-to-gif (2)](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/7fa445f9-52bd-47dc-bbee-1f3cf4b41e3b)
    
    <br/>

- ë§ˆì´í˜ì´ì§€ ë‚´ê°€ì‘ì„±í•œ ëŒ“ê¸€, ë¶ë§ˆí¬ í•œëˆˆì— ë³´ê¸°
    
    - ë‚´ê°€ ì‘ì„±í•œ ëŒ“ê¸€ê³¼ ì°œí•œ ì•½êµ­ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆê³  ë§ˆì´í˜ì´ì§€ ë‚´ì—ì„œ  ì•½êµ­ì •ë³´ë¡œ ì´ë™í•˜ê±°ë‚˜ ì‚­ì œê°€ ê°€ëŠ¥í•˜ë‹¤.
    
      ![ezgif com-video-to-gif (3)](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/133fcf35-12bc-40ff-adc7-928ce534398b)
    
    <br/>

- íšŒì›ì •ë³´ ìˆ˜ì •
    - í”„ë¡œí•„ ì‚¬ì§„ ë³€ê²½, ë‹‰ë„¤ì„ ë³€ê²½, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì›íƒˆí‡´ê°€ ê°€ëŠ¥í•˜ë‹¤.
      ![ezgif com-video-to-gif (4)](https://github.com/finalProject-12/finalproject-12FE/assets/109677566/14816d18-e1b2-4c34-b22a-5d7f192554bb)

<br/>
<br/>

## ğŸ’¡Â ê¸°ìˆ ì  ì˜ì‚¬ê²°ì •

**BE**

| ì‚¬ìš© ê¸°ìˆ  | ë„ì…ì´ìœ  | ì˜ê²¬ê²°ì • |
| --- | --- | --- |
| QueryDSL | (1) ë™ì  ì¿¼ë¦¬ ê°„í¸êµ¬í˜„, (2) ì½”ë“œ ê°€ë…ì„± ë° ê¸°ëŠ¥ ìœ ì§€ë³´ìˆ˜ ìš©ì´, (3) ì‘ì„±í•œ ì¿¼ë¦¬ë¬¸ì— ëŒ€í•œ ë¬¸ë²•ì  ì˜¤ë¥˜ë¥¼ í™•ì¸ ê°€ëŠ¥ | 8ê°œì˜ ì¡°ê±´ì„ ê²€ìƒ‰í•˜ê¸° ìœ„í•œ 311ì¤„ì˜ ê¸´ ì½”ë“œë¡œ ì¸í•´ ì½”ë“œ ê°€ë…ì„± ë° ë¡œì§ ìˆ˜ì •ì— ë¶ˆë¦¬í•¨. QueryDSLì„ ì ìš©í•˜ì—¬ 166ì¤„ì˜ ì½”ë“œë¡œ ê°„í¸í•˜ê²Œ ë™ì  ì¿¼ë¦¬ë¥¼ êµ¬í˜„í•¨ |
| KAKAO ì†Œì…œ ë¡œê·¸ì¸ API | ì‚¬ìš©ìê°€ ê¸°ì¡´ì˜ ê³„ì •ì„ ì´ìš©í•˜ì—¬ ê°„í¸í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¡œê·¸ì¸ í•  ìˆ˜ ìˆìŒ | ì˜¨êµ­ë¯¼ì´ ì‚¬ìš©í•˜ëŠ” ì¹´ì¹´ì˜¤í†¡ ê³„ì •ì„ ì´ìš©í•˜ì—¬ ì†ì‰½ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ KAKAO ì†Œì…œ ë¡œê·¸ì¸ APIë¥¼ ì´ìš©í•¨ |
| í˜ì´ì§€ë„¤ì´ì…˜ | ê²€ìƒ‰ ì‹œ ì†Œìš”ë˜ëŠ” ì‹œê°„ì„ ë‹¨ì¶•í•˜ê¸° ìœ„í•´, ì§€ë„ì— ì°íˆëŠ” ì•½êµ­ì„ ì œí•œí•˜ê¸° ìœ„í•´ | í•œ í˜ì´ì§€ ë‹¹ 20ê°œì˜ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜•ì‹ì˜ í˜ì´ì§€ë„¤ì´ì…˜ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì • |
| iterator ì ìš© | Forë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë¶ˆí•„ìš”í•œ ìˆœíšŒ ë°œìƒ, ê±´ë„ˆë›°ê¸° ê¸°ëŠ¥ì´ ì—†ì–´ ì¶”ê°€ì ì¸ ì½”ë“œ ë°œìƒ  | ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ë©° ê°ì²´ë¥¼ ì‚­ì œí•  ë•Œ ë¶ˆí•„ìš”í•œ ìˆœíšŒë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ Iteratorì˜ remove ì‚¬ìš©, ê±´ë„ˆë›°ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Iteratorì˜ hasNext(), next() ì‚¬ìš© |

<br/>

## ğŸ§¨íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<details>
<summary>ì¹´ì¹´ì˜¤ REST API ì‚¬ìš© ë¬¸ì œ</summary>
  <div markdown="1">
    <br/>
### ì˜¤ë¥˜ ë‚´ì—­

**`org.springframework.web.client.HttpClientErrorException$Unauthorized: 401 Unauthorized`**

- HTTP 401 ìƒíƒœ ì½”ë“œì¸ "Unauthorized" ì—ëŸ¬ë¥¼ ì˜ë¯¸
- ì´ ì˜¤ë¥˜ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì¦ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì¸ì¦ì´ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°ì— ë°œìƒ

---

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

(ì–´ë–»ê²Œ í•˜ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ í•´ë‹¹ ê³¼ì •)

ì¹´ì¹´ì˜¤ ê³„ì • ì—°ê²° í•´ì œë¥¼ ìœ„í•´ ì•„ë˜ í† í°ì„ 

- ì˜¤ë¥˜ ì½”ë“œ
    
    ```java
    //í† í°
    kakaoAccessToken = "Bearer  " + kakaoAccessToken;
    
    private void disconnectKakaoAccount(String kakaoAccessToken) {
    	
    		HttpHeaders headers = new HttpHeaders();
    		headers.add("Content-type", "application/x-www-form-urlencoded;charset=utf-8");
    		headers.add("Authorization", kakaoAccessToken);
    
    		MultiValueMap<String,String> body = new LinkedMultiValueMap<>();
    		body.add("message", "íƒˆí‡´ ì™„ë£Œ");
    		HttpEntity<MultiValueMap<String, String>> kakaoTokenDisconnect =
    			new HttpEntity<>(body, headers);
    		RestTemplate rt = new RestTemplate();
    		System.out.println("HTTP!!!!!!!!!!~");
    
    		ResponseEntity<String> signOut = rt.exchange(
    			"https://kapi.kakao.com/v1/user/unlink",
    			HttpMethod.POST,
    			kakaoTokenDisconnect,
    			String.class
    		);
    	}
    ```
    

---

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

Controllerë¶€í„° ë°›ì€ ë§¤ê°œë³€ìˆ˜ë“¤ì„ Serviceì˜ ë§ˆì§€ë§‰ ë¡œì§ê¹Œì§€ @Slf4jì˜ [log.info](http://log.info) ë©”ì†Œë“œë¥¼ í™œìš©í•´ì„œ ì¶œë ¥ ì—¬ë¶€ë¥¼ í™•ì¸ 

---

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

 kakaoAccessToken í† í°ì„ ë§Œë“¤ ë•Œ, ë¶™ì—¬ì£¼ëŠ” â€˜Bearer â€˜ ì´ ì˜ëª» ì‘ì„±ë˜ì–´ ìˆì–´ì„œ ìˆ˜ì •í•¨
 </div>
</details>
<br/>
<br/>
<details>
<summary>ci/cd ìƒ codedeploy-agent ì˜ ê¶Œí•œ ë¬¸ì œ</summary>
  <div markdown="1">
<br/>
    ### ì˜¤ë¥˜ ë‚´ì—­

ci/cdë¥¼ êµ¬ì¶•í•˜ëŠ” ê³¼ì •ì—ì„œ, codedeployì— ë°°í¬ê°€ ì„±ê³µí•œ ê²ƒ ê¹Œì§€ í™•ì¸ì„ í–ˆìŒì—ë„
ì‰˜ìŠ¤í¬ë¦½íŠ¸([deploy.sh](http://deploy.sh/))ê°€ êµ¬ë™ì„ í•˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìƒê²¼ë‹¤. 
ì›ì¸ì„ ì°¾ì•„ë³´ë‹ˆ, ì†Œìœ ìì˜ ë¬¸ì œì˜€ë‹¤.
appspec.ymlì„ ë³´ë©´, ë‚˜ëŠ” ê¶Œí•œì„ ubuntu ë¡œ ì£¼ì—ˆì§€ë§Œ
codedeploy-agentëŠ” ì„¤ì¹˜ë‹¹ì‹œë¶€í„° rootì˜ ê¶Œí•œì„ ê°€ì§€ê³  ì„¤ì¹˜ê°€ ëœ ê²ƒì´ ë¬¸ì œì˜€ë‹¤.

---

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

(ì–´ë–»ê²Œ í•˜ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ì§€ í•´ë‹¹ ê³¼ì •)

- ì˜¤ë¥˜ ì½”ë“œ
    
    ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬
    codedeploy-agentì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ë‹ˆ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì€ ìƒíƒœë¡œ ë˜ì–´
    active(running)ì´ì–´ì•¼ í•˜ëŠ” ìƒíƒœê°€ active(exited)ë¡œ ë˜ì–´ìˆì—ˆë‹¤.
    
    ```jsx
    service codedeploy-agent status
    ```
    

---

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

ì‹œë„1 codedeployì˜ ê¶Œí•œì„ ubuntuê°€ ì•„ë‹Œ rootë¡œ ë³€ê²½í•´ë´¤ë‹¤.

ì‹œë„2 ì›ë˜ rootì˜ ê¶Œí•œì„ ê°€ì§€ê³  ìˆë˜ codedeploy-agentì˜ ê¶Œí•œì„ ubuntuë¡œ ë°”ê¾¸ê²Œ ì‹œë„.

---

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

`sudo service codedeploy-agent stop` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë™ì„ ë©ˆì¶”ê³ ,
`sudo sed -i 's/""/"ubuntu"/g' /etc/init.d/codedeploy-agent` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´
// /etc/init.d/codedeploy/agentì— ìˆëŠ” ""ë¥¼ "ubuntu"ìœ¼ë¡œ ë³€ê²½. (CodeDeploy agentë¥¼ ìˆ˜í–‰í•  non-root ê³„ì •)
vi /etc/init.d/codedeploy-agent ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ë³€ê²½ ì—¬ë¶€ë¥¼ í™•ì¸ í›„
// /opt/codedeploy/agentì— ìˆëŠ” ëª¨ë“  íŒŒì¼ë“¤ì˜ ì†Œìœ ì/ê·¸ë£¹ì„ ubuntu:ubuntuìœ¼ë¡œ ë³€ê²½í•œë‹¤.

> `sudo chown ubuntu:ubuntu -R /opt/codedeploy-agent
    sudo chown ubuntu:ubuntu -R /var/log/aws/`

ê·¸ë¦¬ê³  /etc/init.dì˜ codedeploy-agent.service ë˜í•œ Userë¥¼ ubuntuë¡œ ì…ë ¥í•˜ê³ 
sudo service codedeploy-agent startë¥¼ ì‹¤í–‰í•˜ì—¬ ë°”ë€ê²ƒì„ ìµœì¢…ì ìœ¼ë¡œ í™•ì¸í•˜ì˜€ë‹¤.

ê·¸ í›„ ì¬ë°°í¬ë¥¼ í•˜ë‹ˆ, ì •ìƒì ìœ¼ë¡œ cicdê°€ êµ¬ì¶•ëœ ê²ƒì„ í™•ì¸í•˜ì˜€ë‹¤.
  </div>
  </details>
<br/>
<details>
<summary>EC2 Ubuntuì˜ ì„œë²„ì‹œê°„ ë¬¸ì œ</summary>
  <div markdown="1">
    <br/>
    ### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

### ì˜¤ë¥˜ ë‚´ì—­

ìš°ë¦¬ ì¡°ì—ì„œ ë§Œë“  ì‚¬ì´íŠ¸ì—ì„œ ì˜ì—… ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰ì„ í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆëŠ”ë°,
ë¡œì§ ìƒìœ¼ë¡œ ë¬¸ì œê°€ ì—†ëŠ” ê²ƒì„ í™•ì¸í•˜ì—¬ë„ ë°°í¬í•œ ì„œë²„ì—ì„œ ì „ë¶€ ì˜ì—…ì´ ì¢…ë£Œëœ ê³³ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ì˜€ë‹¤.

---

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

ë°°í¬ë¥¼ í•´ë†“ì€ EC2ì˜ Ubuntuì˜ ì„œë²„ì‹œê°„ì´ UTC íƒ€ì„ì¡´ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆë˜ ê²ƒì´ë‹¤.
êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì´ ì‹œê°„ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” ê²°ê³¼ë¥¼ ê°€ì§€ê³  ìˆì—ˆìœ¼ë¯€ë¡œ
í•œêµ­ í‘œì¤€ì‹œ(KST)ë¡œ ë³€ê²½í•˜ì—¬ì•¼ í–ˆë‹¤.

- ì˜¤ë¥˜ ì½”ë“œ
    
    ```jsx
    timedatectl
    ```
    

---

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

ì‹œë„1 codedeployì˜ ê¶Œí•œì„ ubuntuê°€ ì•„ë‹Œ rootë¡œ ë³€ê²½í•´ë´¤ë‹¤.

ì‹œë„2 ì›ë˜ rootì˜ ê¶Œí•œì„ ê°€ì§€ê³  ìˆë˜ codedeploy-agentì˜ ê¶Œí•œì„ ubuntuë¡œ ë°”ê¾¸ê²Œ ì‹œë„.

---

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

í•œêµ­ í‘œì¤€ì‹œ(KST)ë¡œ ë³€ê²½í•˜ê¸° ìœ„í•´ /etc/localtimeì„ ì§€ìš°ê³  ìƒˆë¡œ ìƒì„±í•´ì£¼ì–´ì•¼ í•œë‹¤.
ë¨¼ì € í˜„ì¬ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ì‚­ì œí•˜ê¸° ìœ„í•´ 
`sudo rm -rf /etc/localtime` ëª…ë ¹ì–´ ì‚¬ìš©,
ê·¸ë¦¬ê³  ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ í•œêµ­ í‘œì¤€ì‹œ(/usr/share/zoneinfo/Asia/Seoul)ë¡œ ë‹¤ì‹œ ìƒì„±í•´ì¤€ë‹¤.		
`sudo ln -s /usr/share/zoneinfo/Asia/Seoul /etc/localtime` ëª…ë ¹ì–´ ì‚¬ìš©
`timedatectl` ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì„ì¡´ì„ í™•ì¸í•˜ê³ ,
Local timeì´ KSTë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
  </div>
  </details>
<br/>
<details>
<summary>ë¶ˆí•„ìš”í•œ ë°ì´í„° ì¡°íšŒ ë¬¸ì œ</summary>
  <div markdown="1">
<br/>
    ### ì˜¤ë¥˜ ë‚´ì—­

ì—”í‹°í‹° ê¸°ë°˜ ë°ì´í„° ì¡°íšŒë¡œ ì¸í•´ ë¶ˆí•„ìš”í•œ í•„ë“œë“¤ë„ ì¡°íšŒí•˜ì—¬ ë°ì´í„° ì¡°íšŒ ì„±ëŠ¥ì„ ì•…í™”ì‹œí‚¤ëŠ” ë¬¸ì œ ë°œìƒ

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

- ì˜¤ë¥˜ ì½”ë“œ
    
    Store ì—”í‹°í‹° ì „ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ì¿¼ë¦¬ë¬¸ì´ ì‹¤í–‰ë¨
    
    ```java
    public List<Store> searchStoreWithinDistance(String baseRadius, String baseLatitude, String baseLongitude) {
    
    			NumberExpression<Double> distance = distance(baseLatitude, baseLongitude, store.latitude, store.longitude);
    
    			return jpaQueryFactory
    				.select(store)
    				.from(store)
    				.where(
    					withinDistance(baseLatitude, baseLongitude, store.latitude, store.longitude)
    
    				)
    				.orderBy(distance.asc())
    				.fetch();
    
    	}
    ```
    

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

ì‹œë„1 : Store ì—”í‹°í‹°ë¥¼ StoreResponseDtoë¡œ ë³€ê²½

```java
public List<StoreResponseDto> searchStoreWithinDistance(String baseRadius, String baseLatitude, String baseLongitude) {

			NumberExpression<Double> distance = distance(baseLatitude, baseLongitude, store.latitude, store.longitude);

			return QueryResults<StoreResponseDto> results = jpaQueryFactory
				.select(Projections.constructor(StoreResponseDto.class,
					store.id, store.address, store.name, store.callNumber,
					store.weekdaysTime, store.longitude, store.latitude
					))
				.from(store)
				.where(
					withinDistance(baseLatitude, baseLongitude, store.latitude, store.longitude)

				)
				.orderBy(distance.asc())
				.fetch();
```

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— í•„ìš”í•œ ë°ì´í„°ë§Œ ì¡°íšŒí•˜ê¸° ìœ„í•´ Dto ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±

QueryDSLì˜ Projections.constructor ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ë©´ í¸ë¦¬í•˜ê²Œ Dto í´ë˜ìŠ¤ì˜ ìƒì„±ìë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆìŒ
  </div>
  </details>
<br/>
<details>
<summary>api ìš”ì²­ ì‹œ, ë¹ˆ ë¬¸ìì—´ ì²˜ë¦¬ ë¬¸ì œ</summary>
  <div markdown="1">
<br/>
    ### ì˜¤ë¥˜ ë‚´ì—­

REST API ìš”ì²­ ì‹œ, í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ë‹¬ ë°›ì€ ë¹ˆ ë¬¸ìì—´ì„ Nullë¡œ í˜¼ë™í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì„¤ê³„ì— ì–´ë ¤ì›€ ë°œìƒ

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

í´ë¼ì´ì–¸íŠ¸ì˜ api ìš”ì²­ì„ í†µí•´ ë§¤ê°œ ë³€ìˆ˜ë“¤ì„ Controllerì—ì„œ ë°›ê³ 
ì´ë¥¼ ì²˜ë¦¬í•  ë•Œ, nullê³¼ í˜¼ë™

```java
//Controller
@GetMapping("/api/store/foreign/search")
	public ResponseEntity<Page<ForeignStoreResponse>> searchForeignStore(
		@RequestParam("page") int page,
		@RequestParam("size") int size,
		@RequestParam("storeName") String storeName,
		@RequestParam("gu") String gu,
		@RequestParam("open") boolean open,
		@RequestParam("holidayBusiness") boolean holidayBusiness,
		@RequestParam("nightBusiness") boolean nightBusiness,
		@RequestParam("english") boolean english,
		@RequestParam("chinese") boolean chinese,
		@RequestParam("japanese") boolean japanese,
		@RequestParam("radius") String radius,
		@RequestParam("latitude") String latitude, @RequestParam("longitude") String longitude,
		@AuthenticationPrincipal UserDetailsImpl userDetails){

		Page<ForeignStoreResponse> foreignStoreResponses = storeService.searchForeignStore(page, size, storeName, gu, open, holidayBusiness, nightBusiness, english, chinese, japanese, radius, latitude, longitude, userDetails);
		return ResponseEntity.status(HttpStatus.OK).body(foreignStoreResponses);
	}

```

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

ì‹œë„ 1 - ì‚¼í•­ ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ë¹ˆë¬¸ìì—´ ì²˜ë¦¬

```java
@Data
public class SearchForeignOptionRequest {
	private Integer page;
	private Integer size;
	private String storeName;
	private String gu;
	private boolean open;
	private boolean holidayBusiness;
	private boolean nightBusiness;

	private boolean english;
	private boolean chinese;
	private boolean japanese;

	private String radius;
	private String latitude;
	private String longitude;

	public MappedSearchForeignRequest toMappedSearchRequest() {
		return MappedSearchForeignRequest.builder()
			.page(page == null ? null : page.intValue())
			.size(size == null ? null : size.intValue())
			.storeName(storeName == "" ? null : storeName)
			.gu(gu == "" ? null : gu)
			.open(open == true ? true : false)
			.holidayBusiness(holidayBusiness == true ? true : false)
			.nightBusiness(nightBusiness == true ? true : false)

			.english(english == true? 1 : 0)
			.chinese(chinese  == true? 1 : 0)
			.japanese(japanese == true? 1 : 0)

			.baseRadius(radius == "" ? null : radius)
			.baseLatitude(latitude == "" ? null : latitude)
			.baseLongitude(longitude == "" ? null : longitude)
			.build();

	}
}
```

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

ê°ì²´ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ ì‚¼í•­ ì—°ì‚°ìë¥¼ ì´ìš©í•˜ì—¬ ë¹ˆë¬¸ìì—´ì„ null ì²˜ë¦¬
  </div>
  </details>
<br/>
<details>
<summary>N+1</summary>
  <div markdown="1">
<br/>
    ### ì˜¤ë¥˜ ë‚´ì—­

ë§ˆì´í˜ì´ì§€ì—ì„œ ë¶ë§ˆí¬ í™•ì¸í•˜ëŠ” ë¡œì§ ì‹¤í–‰ ì‹œ n+1 ë¬¸ì œ ë°œìƒ

---

### ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ë¡œ

- ì˜¤ë¥˜ ì½”ë“œ
    
    ```java
    public List<BookmarkResponseDto> getBookmark(Member member) {
    
    		List<Bookmark> bookmarks = bookmarkRepository.findAllByMember(member);
    		List<BookmarkResponseDto> bookmarkResponseDtos = new ArrayList<>();
    
    		for (Bookmark bookmark : bookmarks) {
    
    			Long storeId = bookmark.getStore().getId();
    			Optional<Store> storeOptional = **storeRepository.findById(storeId);**
    			Store store = storeOptional.get();
    			BookmarkResponseDto bookmarkResponseDto = new BookmarkResponseDto(store);
    
    			//ê³µíœ´ì¼ ì˜ì—… í™•ì¸í•˜ê¸°
    			if (store.getHolidayTime() != null) {
    				bookmarkResponseDto.setHolidayBusiness(true);
    			}
    
    			//ì•¼ê°„ ì˜ì—… í™•ì¸í•˜ê¸°
    			if(store.getNightPharmacy() == 1){
    				bookmarkResponseDto.setNightBusiness(true);
    			}
    
    			if(store.getForeignLanguage() != null){
    				if(store.getForeignLanguage() == 1){
    					bookmarkResponseDto.setForeign(true);
    				}
    			}
    
    			//ê²€ì‚¬ ëë‚œ dto, ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€í•˜ê¸°
    			bookmarkResponseDtos.add(bookmarkResponseDto);
    		}
    
    		return bookmarkResponseDtos;
    	}
    ```
    
    storeRepository.findById(storeId); (í•´ë‹¹ ì½”ë“œì—ì„œ êµµê³  ë°‘ì¤„ ìˆëŠ” ë¶€ë¶„)ì—ì„œ n+1 ë¬¸ì œ ë°œìƒ
    

---

### ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œë„í•´ë³¸ ê²ƒë“¤

- ì‹œë„1
    
    ```java
    @Query("select b from Bookmark b left join fetch b.member m where m = :member")
    	List<Bookmark> findAllWithMember(@Param("member") Member member);
    ```
    
    BookmarkRepositoryì—ì„œ í•´ë‹¹ ë©”ì†Œë“œë¥¼ ë§Œë“¤ì–´ findAllByMember ëŒ€ì‹  ì‚¬ìš©
    
    â‡’ í•´ê²°ë˜ì§€ ì•ŠìŒ
    
- ì‹œë„2
    
    Bookmarkì™€ ì—°ê´€ ê´€ê³„ ë§ºê³  ìˆëŠ” ì—”í‹°í‹°ë“¤ì˜ fetchTypeì„ ëª¨ë‘ ì§€ì—° ë¡œë”©ìœ¼ë¡œ ë°”ê¿ˆ.
    
    â‡’ ì²˜ìŒì—ëŠ” í•´ê²°ëœ ë“¯ ë³´ì´ì§€ë§Œ ì—°ê´€ê´€ê³„ë¥¼ ê°€ì ¸ì™€ì•¼ í•  ë•ŒëŠ” n+1ì´ í•´ê²°ë˜ì§€ ì•ŠìŒ.
    

---

### ì˜¤ë¥˜ í•´ê²° ë°©ë²•

```java
@Query("SELECT b " +
		"FROM Bookmark b " +
		"LEFT JOIN FETCH b.store " +
		"LEFT JOIN FETCH b.member " +
		"m WHERE m = :member")// m WHERE m = :member")
	List<Bookmark> findAllWithStore(@Param("member") Member member);
```

ì˜ì†ì„± ì»¨í…ŒìŠ¤íŠ¸ì— Store ì •ë³´ê°€ ì—†ë‹¤ëŠ” ê²ƒì´ ë¬¸ì œì„ì„ ì•Œì•„ë‚´ì–´ findAllByMember ëŒ€ì‹  ì§ì ‘ ì¿¼ë¦¬ë¡œ ìƒì„±í•œ í•´ë‹¹ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤.

- í•´ê²° ì „ì²´ ì½”ë“œ
    
    ```
    public List<BookmarkResponseDto> getBookmark(Member member) {
    
    		List<Bookmark> bookmarks = bookmarkRepository.findAllWithStore(member);
    		List<BookmarkResponseDto> bookmarkResponseDtos = new ArrayList<>();
    
    		Iterator<Bookmark> bookmarkIterator = bookmarks.iterator();
    		while (bookmarkIterator.hasNext()) {
    
    			Bookmark bookmark = bookmarkIterator.next();
    			Store store = bookmark.getStore();
    			BookmarkResponseDto bookmarkResponseDto = new BookmarkResponseDto(store);
    			bookmarkResponseDtos.add(bookmarkResponseDto);
    
    			if (store.getHolidayTime() != null) {
    				bookmarkResponseDto.setHolidayBusiness(true);
    			}
    
    			if (store.getNightPharmacy() != 0) {
    				bookmarkResponseDto.setNightBusiness(true);
    			}
    
    			if (store.getForeignLanguage() != null) {
    				bookmarkResponseDto.setForeign(true);
    			}
    		}
    
    		return bookmarkResponseDtos;
    	}
    
    ```
    
  </div>
</details>

<br/>
<details>
<summary>DB ìµœì í™”</summary>
  <div markdown="1">
<br/>
	  
![image](https://github.com/finalProject-12/finalproject-12BE/assets/106947027/12381202-f5d7-47ec-b294-2a02712798ba)

  </div>
</details>

<br/>
<br/>


## ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦Â íŒ€ì› ì†Œê°œ

| ì—­í•  | ì´ë¦„ | ë¶„ë‹´ |
| --- | --- | --- |
| FE(ë¦¬ë”) | ìµœìœ ë¦¬ | [ì•½êµ­(ì™¸êµ­ì–´ ê°€ëŠ¥, ì¼ë°˜ ëª¨ë‘)] -  ì „ì²´ë³´ê¸°, ìƒì„¸ë³´ê¸°, ê²€ìƒ‰, ì¹´ì¹´ì˜¤ë§µ <br/>[ë¶ë§ˆí¬] - ë¶ë§ˆí¬ ëˆ„ë¥´ê¸°, ë¶ë§ˆí¬ ì¡°íšŒ<br/>[ë©¤ë²„] - íšŒì›ê°€ì… ë° ë¡œê·¸ì¸<br/>[ëŒ“ê¸€] - ëŒ“ê¸€CRUD<br/>[ë§ˆì´í˜ì´ì§€] - íšŒì› ì •ë³´ìˆ˜ì •(í”„ë¡œí•„ì´ë¯¸ì§€, ë‹‰ë„¤ì„, ë¹„ë°€ë²ˆí˜¸ë³€ê²½)<br/>[ê³µì§€ì‚¬í•­] - ê³µì§€ì‚¬í•­ CRUD<br/>[ê¸°íƒ€] - í™ˆí™”ë©´ UI, vercelì— ë°°í¬ |
| BE(ë¶€ë¦¬ë”) | ê¹€ì€ì„œ | [ì•½êµ­(ì™¸êµ­ì–´ ê°€ëŠ¥, ì¼ë°˜ ëª¨ë‘)] -  ì „ì²´ë³´ê¸°, ìƒì„¸ë³´ê¸°, ê²€ìƒ‰<br/>[ë¶ë§ˆí¬] - ë¶ë§ˆí¬ ëˆ„ë¥´ê¸°, ë¶ë§ˆí¬ ì¡°íšŒ<br/>[ë©¤ë²„] - ìœ ì € ë‹‰ë„¤ì„ ë³€ê²½, ìœ ì € ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ ì§€ê¸‰, ìœ ì € ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, <br/>í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ, íšŒì›ê°€ì… ì‹œ ì´ë©”ì¼ ì¸ì¦, ì¸ì¦ë²ˆí˜¸ ê²€ì‚¬<br/>[ê¸°íƒ€] - ê²€ìƒ‰ ê¸°ëŠ¥ í˜ì´ì§€ë„¤ì´ì…˜, ê³µê³µ api dbì— ì €ì¥, í…ŒìŠ¤íŠ¸ ì½”ë“œ (ì§„í–‰ ì¤‘) |
| BE | ìœ ë²”ëª¨ | [ì•½êµ­] - ì™¸êµ­ì–´ ê°€ëŠ¥ ì•½êµ­ API ë¶ˆëŸ¬ì˜¤ê¸°(Apachi Poi)<br/>[ëŒ“ê¸€] - ëŒ“ê¸€ ê´€ë ¨ ëª¨ë“  ë¡œì§<br/>[ë§ˆì´í˜ì´ì§€] - í•´ë‹¹ íšŒì›ì´ ì‘ì„±í•œ ëŒ“ê¸€ ëª©ë¡ ìƒì„±<br/>[ë°°í¬] -< NGINX, EC2, RDS > <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Github Action CI/CD (S3 Bucket + CodeDeploy ì´ìš©<br/> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Https ì„¤ì • <br/>[ê¸°íƒ€] - í…ŒìŠ¤íŠ¸ ì½”ë“œ (ì§„í–‰ì¤‘) |
| BE | ë°•ê·¼í™ | [ë©¤ë²„] - ì¼ë°˜ íšŒì› ê°€ì… ë° ë¡œê·¸ì¸, SNS ê³„ì • ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, íšŒì› íƒˆí‡´<br/>[ì•½êµ­] - QueryDSL ì ìš©í•œ ê²€ìƒ‰<br/>[ê³µì§€ì‚¬í•­] - ê³µì§€ì‚¬í•­ CRUD<br/>[ê´€ë¦¬ì] - ì•½êµ­ ê´€ë¦¬, íšŒì› ê´€ë¦¬, ëŒ“ê¸€ ê´€ë¦¬<br/>[ê¸°íƒ€] - db ìŠ¤í‚¤ë§ˆ ìµœì í™”  |
| ë””ìì´ë„ˆ | ê¹€ìˆ˜ë¹ˆ | UI/UX ë””ìì¸, PPT ë””ìì¸, ì˜ìƒí¸ì§‘,ì•„ì´ë””ì–´ ì œê³µ |
|  |  |  |
